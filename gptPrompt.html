<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./assets/styles/light-theme.css">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"></script>

    <style>
        .section-slider {
            display: flex;
            flex-direction: row;
            align-items: stretch;
            height: 80vh;

            gap: 20px;
            padding: 40px 20px;
        }

        .section-slider .section-slider-controls {
            display: flex;
            flex-flow: column nowrap;
            background-color: white;
            border-radius: 20px;
            width: fit-content;
            padding: 20px 0;
            gap: 10px;
            align-self: center;
            box-shadow: 0px 10px 25px -10px rgba(0, 0, 0, 0.8);
            z-index: 3;
        }

        .section-slider .section-slider-controls .button-tertiary {
            flex-flow: column nowrap;
            --size: clamp(0.7rem, 0.53rem + 0.85vw, 1.3rem);

            &>svg {
                height: calc(var(--size) * 2);
            }

            &:hover {
                color: #FF5000
            }

            &:hover>svg {
                color: #FF5000;
            }
        }



        .section-slider .sections {
            display: block;
            width: 100%;
            height: 100%;

            display: flex;
            flex-flow: column nowrap;
            gap: 100px;
            padding: 20px;
            overflow: hidden;

            /* overflow-y: auto; */
            scroll-snap-type: y mandatory;
            scroll-behavior: smooth;
            overscroll-behavior: contain;
        }

        .section-slider .sections .section-slide {
            background-color: azure;
            border-radius: 20px;
            flex: 0 0 100%;

            scroll-snap-align: start;
            transition: transform 0.5s ease, opacity 0.5s ease;
            box-shadow: 0px 10px 25px -10px rgba(0, 0, 0, 0.8);
        }

        @media screen and (max-width: 768px) {
            .section-slider {
                flex-flow: column-reverse nowrap;
                padding: 10px;
                gap: 5px;
                height: 85vh;
            }

            .section-slider .section-slider-controls {
                padding: 10px;
                flex-flow: row nowrap;
                width: 90%;
                justify-content: space-evenly;
            }

            .section-slider .sections {
                flex-flow: row nowrap;
                padding: 0;
                padding-top: 10px;
                padding-bottom: 30px;
            }

            .section-slider .section-slider-controls .button-tertiary {
                padding: 0;
            }
        }

        /* Scale effect */
        .section-slide {
            transform: scale(0.9);
            opacity: 0.8;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .section-slide[data-selected="yes"] {
            transform: scale(1.0);
            opacity: 1;
        }

        /* Selected button state */
        .section-slider-nav-button[data-selected="yes"] {
            font-weight: bold;
            color: black;
            text-decoration: underline;
        }
    </style>
</head>

<body>


    <h2 class="destination-header-title">Visit <strong>Dubai</strong></h2>
    <div class="section-slider">
        <div class="section-slider-controls">
            <a class="button-tertiary section-slider-nav-button" data-section="1" data-selected="yes">General</a>

            <a class="button-tertiary section-slider-nav-button" data-section="2" data-selected="no">Hotels</a>

            <a class="button-tertiary section-slider-nav-button" data-section="3" data-selected="no">Attractions</a>

            <a class="button-tertiary section-slider-nav-button" data-section="4" data-selected="no">Activities</a>

            <a class="button-tertiary section-slider-nav-button" data-section="5" data-selected="no">Reviews</a>
        </div>

        <div class="sections">
            <section class="section-slide" id="section-1" data-section="1" data-selected="yes">test section-1</section>
            <section class="section-slide" id="section-2" data-section="2" data-selected="no">test section-2</section>
            <section class="section-slide" id="section-3" data-section="3" data-selected="no">test section-3</section>
            <section class="section-slide" id="section-4" data-section="4" data-selected="no">test section-4</section>
            <section class="section-slide" id="section-5" data-section="5" data-selected="no">test section-5</section>
        </div>
    </div>
    <script>
        // $(document).ready(function () {
        //     $('.section-slider-nav-button').on('click', function (e) {
        //         e.preventDefault();
        //         const targetSectionId = $(this).data('section');

        //         // Target section and button
        //         const targetSlide = $('#section-' + targetSectionId);
        //         const targetSliderButton = $(this);

        //         if (targetSlide.length) {
        //             // Scroll to the new section
        //             targetSlide.get(0).scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });

        //             // Reset all sections and buttons
        //             $('.section-slide').each((index, slide) => {
        //                 $(slide).attr("data-selected", "no");
        //             });
        //             $('.section-slider-nav-button').each((index, button) => {
        //                 $(button).attr("data-selected", "no");
        //             });

        //             // Set new section and button as selected
        //             targetSlide.attr("data-selected", "yes");
        //             targetSliderButton.attr("data-selected", "yes");
        //         }
        //     });
        // });
        $(document).ready(function () {
            $('.section-slider-nav-button').on('click', function (e) {
                e.preventDefault();
                const targetSectionId = $(this).data('section');

                const targetSlide = $('#section-' + targetSectionId);
                const targetSliderButton = $(this);

                if (targetSlide.length) {
                    // Create a promise for scrollIntoView completion
                    const scrollPromise = new Promise((resolve) => {
                        targetSlide.get(0).scrollIntoView({
                            behavior: 'smooth',
                            block: 'nearest',
                            inline: 'center'
                        });

                        // Wait for scroll animation to complete
                        setTimeout(resolve, 500); // 500ms matches the CSS transition time
                    });

                    // Update attributes after scroll completes
                    scrollPromise.then(() => {
                        $('.section-slide').attr("data-selected", "no");
                        $('.section-slider-nav-button').attr("data-selected", "no");

                        targetSlide.attr("data-selected", "yes");
                        targetSliderButton.attr("data-selected", "yes");
                    });
                }
            });
        });
    </script>
    </div>
</body>

</html>